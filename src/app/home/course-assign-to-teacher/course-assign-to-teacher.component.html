<h1>{{ title }}</h1>
<form class="row col-12 col-sm-9 col-md-7 col-lg-5" [formGroup]="form" (ngSubmit)="form.value.remainingCredit < form.value.courseCredit ? openDialog() : onSubmit()">
    <div class="row">
        <div class="col-3">
            <label class="form-label">Select Department * </label>
        </div>
        <div class="col-9">
            <select class="form-control" formControlName="departmentId" name="departmentId" id="departmentId">
                <option *ngFor="let dept of departments" [value]="dept.id">
                    {{ dept.name }}
                </option>
            </select>
            <p class="error-text" *ngIf="(form.controls.departmentId.dirty || form.controls.departmentId.touched) && form.get('departmentId')?.invalid"> Please select a department </p>
        </div>
    </div>

    <div class="row">
        <div class="col-3">
            <label class="form-label">Select Teacher * </label>
        </div>
        <div class="col-9">
            <select class="form-control" formControlName="teacherId" name="teacherId" id="teacherId">
                <option *ngFor="let t of teachers" [value]="t.id">
                    {{ t?.name }}
                </option>
            </select>
            <p class="error-text" *ngIf="(teacher.touched || teacher.dirty) && form.get('departmentId')?.invalid"> Please select a department first </p>
            <p class="error-text" *ngIf="(teacher.touched || teacher.dirty) && form.get('departmentId')?.valid && form.get('teacherId')?.invalid"> Please select a teacher </p>
        </div>
    </div>

    <div class="row">
        <div class="col-3">
            <label class="form-label">Credit To Be Taken</label>
        </div>
        <div class="col-9">
            <input class="form-control" readonly formControlName="creditToBeTaken" [value]="" name="creditToBeTaken" id="creditToBeTaken"> 
        </div>
    </div>  
    
    <div class="row">
        <div class="col-3">
            <label class="form-label">Remaining Credit</label>
        </div>
        <div class="col-9">
            <input class="form-control" readonly formControlName="remainingCredit" name="remainingCredit" id="remainingCredit"> 
        </div>
    </div>

    <div class="row">
        <div class="col-3">
            <label class="form-label">Select Course * </label>
        </div>
        <div class="col-9">
            <select class="form-control" formControlName="courseCode" name="courseCode" id="courseCode">
                <option *ngFor="let course of courses" [value]="course.code">
                    {{ course?.code }}
                </option>
            </select>
            <p class="error-text" *ngIf="(course.touched || course.dirty) && form.get('departmentId')?.invalid"> Please select a department first </p>
            <p class="error-text" *ngIf="(course.touched || course.dirty) && form.get('departmentId')?.valid && form.get('courseCode')?.invalid"> Please select a course </p>
        </div>
    </div>

    <div class="row">
        <div class="col-3"><label class="form-label">Course Name</label></div>
        <div class="col-9"><input class="form-control" readonly formControlName="courseName" name="courseName" id="courseName"></div>
    </div>   

    <div class="row">
        <div class="col-3"><label class="form-label">Course Credit</label></div>
        <div class="col-9"><input class="form-control" readonly formControlName="courseCredit" name="courseCredit" id="courseCredit"></div>
    </div>    

    <div class="row">
        <div class="col-9 col-md-10"></div>
        <div class="col-3 col-md-2">
            <button type="submit" [disabled]="form.invalid" mat-flat-button color="primary">Save</button>
        </div>
    </div>

</form>
