<h1>{{ title }}</h1>
    
<form class="row col-11 col-sm-10 col-md-9 col-lg-7" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="row">
        <div class="col-3">
            <label class="form-label">Department</label>
        </div>
        <div class="col-9">
            <select class="form-control" formControlName="departmentId" name="departmentId" id="departmentId">
                <option *ngFor="let dept of departments" [value]="dept.id">
                    {{ dept.name }}
                </option>
            </select>
            <loading *ngIf="departmentFetching"></loading>
            <p class="error-text" *ngIf="(form.controls.departmentId.dirty || form.controls.departmentId.touched) && form.get('departmentId')?.invalid"> Please select a department </p>
        </div>
    </div>
    <div class="row">
        <div class="col-3">
            <label class="form-label">Course</label>
        </div>
        <div class="col-9">
            <select class="form-control" formControlName="courseId" name="courseId" id="courseId" required>
                <option value="null"> Select Course </option>
                <option *ngFor="let course of courses" [value]="course.id">
                    {{ course.code }}
                </option>
            </select>
            <loading *ngIf="departmentFetching"></loading>
            <p class="error-text" *ngIf="(form.controls.courseId.touched || form.controls.courseId.dirty) && form.get('departmentId')?.invalid"> Please select a department first </p>
            <p class="error-text" *ngIf="(form.controls.courseId.touched || form.controls.courseId.dirty) && form.get('departmentId')?.valid && form.get('courseId')?.invalid"> Please select a course </p>
        </div>
    </div>
    <div class="row">
        <div class="col-3">
            <label class="form-label">Room</label>
        </div>
        <div class="col-9">
            <select class="form-control" class="form-control" formControlName="roomId" name="roomId" id="roomId">
                <option *ngFor="let room of rooms" [value]="room.id">
                    {{ room.name }}
                </option>
            </select>
            <loading *ngIf="roomFetching"></loading>
            <p class="error-text" *ngIf="(form.controls.roomId.touched || form.controls.roomId.dirty) && form.get('departmentId')?.invalid"> Please select a department first </p>
            <p class="error-text" *ngIf="(form.controls.roomId.touched || form.controls.roomId.dirty) && form.get('departmentId')?.valid && form.get('roomId')?.invalid"> Please select a room </p>
        </div>
    </div>
    <div class="row">
        <div class="col-3">
            <label class="form-label">Day</label>
        </div>
        <div class="col-9">
            <select class="form-control" formControlName="dayId" name="dayId" id="dayId">
                <option *ngFor="let day of days" [value]="day.id">
                    {{ day.name }}
                </option>
            </select>
            <loading *ngIf="dayFetching"></loading>
            <p class="error-text" *ngIf="(form.controls.dayId.touched || form.controls.dayId.dirty) && form.get('departmentId')?.invalid"> Please select a department first </p>
            <p class="error-text" *ngIf="(form.controls.dayId.touched || form.controls.dayId.dirty) && form.get('departmentId')?.valid && form.get('dayId')?.invalid"> Please select a room </p>
        </div>
    </div>
    <div class="row">
        <div class="col-3">
            <label class="form-label"> From </label>
        </div>
        <div class="col-9">
            <ngx-mat-timepicker [showSpinners]="false" formControlName="from" [enableMeridian]="true">
            </ngx-mat-timepicker>
        </div>
    </div>
    
    <div class="row">
        <div class="col-3">
            <label class="form-label"> To </label>
        </div>
        <div class="col-9">
            <ngx-mat-timepicker [showSpinners]="false" formControlName="to" [enableMeridian]="true">
            </ngx-mat-timepicker>
        </div>
    </div>
    
    <div class="row">
        <div class="col-9 col-md-10"></div>
        <div class="col-3 col-md-2">
            <button type="submit" [disabled]="form.invalid" mat-flat-button color="primary"> Allocate </button>
        </div>
    </div>

</form>    